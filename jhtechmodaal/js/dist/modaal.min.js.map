{"version":3,"sources":["modaal.min.js"],"names":["$","dom","modaal_close","modaal_loading_spinner","Modaal","init","options","elem","self","this","$elem","extend","fn","modaal","data","xhr","scope","is_open","id","Date","getTime","Math","random","toString","substring","attr","private_options","active_class","lastFocus","is_locked","type","hide_close","close_btn","animation","animation_speed","after_callback_delay","on","e","preventDefault","source","document","activeElement","before_open","call","create_basic","fetch_ajax","create_confirm","create_image","create_iframe","create_video","create_instagram","watch_events","start_open","click","off","key","keyCode","target","contains","getElementById","find","focus","is","hasClass","gallery_update","trigger","overlay_close","confirm_callback","build_modal","content","igClass","animation_class","wrap_class","fullscreen_class","fullscreen","custom_class","build_markup","accessible_title","append","appendTo","modaal_overlay","length","children","clone","empty","instagram_id","error_msg","loading_class","loading_content","undefined","ig_url","ajax","url","dataType","cache","success","html","removeClass","window","instgrm","Embeds","process","error","addClass","ajax_error_class","abort","ajax_success","statusText","confirm_title","confirm_content","confirm_button_text","confirm_cancel_button_text","gallery_total","modaal_image_markup","prev_btn","next_btn","gallery_group","gallery_group_items","removeAttr","gallery","each","i","item","img_src","img_alt","img_description","img_active","data_modaal_desc","getAttribute","data_item_active","href","src","gallery_item","alt","desc","active","push","is_active","this_img_src","this_img_alt_txt","this_img_alt","hide","direction","this_gallery","this_gallery_item","this_gallery_total","duration","new_img_w","new_img_h","current_item","incoming_item","next","prev","before_image_change","stop","animate","opacity","css","position","display","width","height","gallery_active_class","after_image_change","modaal_open","modal_wrapper","animation_type","after_open","focusTarget","setTimeout","before_close","remove","after_close","action","background_scroll","overflow","background","overlay_opacity","single_modaal","inline_options","parseInt","existing_modaal","Object","create","element","jQuery"],"mappings":"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","file":"modaal.min.js","sourcesContent":["/*!\n Modaal - accessible modals - v0.2.11\n by Humaan, for all humans.\n http://humaan.com\n */\n/**\n Modaal jQuery Plugin : Accessible Modals\n\n ==== General Options ===\n type (string) \t\t\t\t\t: ajax, inline, image, iframe, confirm. Defaults to 'inline'\n animation (string) \t\t\t\t: Fade, expand, down, up. Defaults to 'fade'\n after_callback_delay (integer)\t: Specify a delay value for the after open callbacks. This is necessary because with the bundled animations\n have a set duration in the bundled CSS. Specify a delay of the same amount as the animation duration in so\n more accurately fire the after open/close callbacks. Defaults 350, does not apply if animation is 'none',\n after open callbacks are dispatched immediately\n\n is_locked (boolean)\t\t\t\t: Set this to true to disable closing the modal via keypress or clicking the background. Beware that if\n type != 'confirm' there will be no interface to dismiss the modal if is_locked = true, you'd have to\n programmatically arrange to dismiss the modal. Confirm modals are always locked regardless of this option\n Defaults to false\n\n hide_close (boolean)\t\t\t: Set this to true to hide the close modal button. Key press and overlay click will still close the modal.\n This method is best used when you want to put a custom close button inside the modal container space.\n\n background (string)\t\t\t\t: Background overlay style. Defaults to '#000'\n overlay_opacity (float) \t\t: Background overlay transparency. Defaults to 0.8\n overlay_close (boolean)\t\t\t: Set this to false if you want to disable click to close on overlay background.\n\n accessible_title (string)\t\t: Accessible title. Default 'Dialog Window'\n start_open (boolean)\t\t\t: Set this to true to launch the Modaal window immediately on page open\n fullscreen (boolean)\t\t\t: Set this to true to make the modaal fill the entire screen, false will default to own width/height attributes.\n custom_class (string)\t\t\t: Fill in this string with a custom class that will be applied to the outer most modal wrapper.\n\n width (integer)\t\t\t\t\t: Desired width of the modal. Required for iframe type. Defaults to undefined //TODO\n height (integer)\t\t\t\t: Desired height of the modal. Required for iframe type. Defaults to undefined //TODO\n\n\n === Events ===\n before_open (function) \t\t\t: Callback function executed before modal is opened\n after_open (function)\t\t\t: Callback function executed after modal is opened\n before_close (function)\t\t\t: Callback function executed before modal is closed\n after_close (function)\t\t\t: Callback function executed after modal is closed\n source (function(element, src))\t: Callback function executed on the default source, it is intended to transform the\n source (href in an AJAX modal or iframe). The function passes in the triggering element\n as well as the default source depending of the modal type. The default output of the\n function is an untransformed default source.\n\n\n === Confirm Options & Events ===\n confirm_button_text (string)\t: Text on the confirm button. Defaults to 'Confirm'\n confirm_cancel_button_text (string) : Text on the confirm modal cancel button. Defaults to 'Cancel'\n confirm_title (string)\t\t\t: Title for confirm modal. Default 'Confirm Title'\n confirm_content (string)\t\t: HTML content for confirm message\n confirm_callback (function)\t\t: Callback function for when the confirm button is pressed as opposed to cancel\n\n\n === Gallery Options & Events ===\n gallery_active_class (string)\t: Active class applied to the currently active image or image slide in a gallery 'gallery_active_item'\n before_image_change (function)\t: Callback function executed before the image slide changes in a gallery modal. Default function( current_item, incoming_item )\n after_image_change (function)\t: Callback function executed after the image slide changes in a gallery modal. Default function ( current_item )\n\n\n === AJAX Options & Events ===\n loading_content (string)\t\t: HTML content for loading message. Default 'Loading &hellip;'\n loading_class (string)\t\t\t: Class name to be applied while content is loaded via AJAX. Default 'is_loading'\n ajax_error_class (string)\t\t: Class name to be applied when content has failed to load. Default is 'modaal-error'\n ajax_success (function)\t\t \t: Callback for when AJAX content is loaded in\n\n\n === SOCIAL CONTENT ===\n instagram_id (string)\t\t\t: Unique photo ID for an Instagram photo.\n\n */\n(function ($) {\n\n    var dom = $('body');\n    var modaal_close = '<button type=\"button\" class=\"modaal-close\" id=\"modaal-close\" aria-label=\"Close (Press escape to close)\"><span>Close</span></button>';\n    var modaal_loading_spinner = '<div class=\"modaal-loading-spinner\"><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div></div>';\n\n    var Modaal = {\n        init: function (options, elem) {\n            var self = this;\n\n            self.$elem = $(elem);\n            self.options = $.extend({}, $.fn.modaal.options, self.$elem.data(), options);\n            self.xhr = null;\n\n            // set up the scope\n            self.scope = {\n                is_open: false,\n                id: 'modaal_' + new Date().getTime() + Math.random().toString(16).substring(2)\n            };\n\n            // add scope attribute to trigger element\n            self.$elem.attr('data-modaal-scope', self.scope.id);\n\n            // private options\n            self.private_options = {\n                active_class: 'is_active'\n            };\n\n            self.lastFocus = null;\n\n            // if is_locked\n            if (self.options.is_locked || self.options.type == 'confirm' || self.options.hide_close) {\n                self.scope.close_btn = '';\n            } else {\n                self.scope.close_btn = modaal_close;\n            }\n\n            // reset animation_speed\n            if (self.options.animation === 'none') {\n                self.options.animation_speed = 0;\n                self.options.after_callback_delay = 0;\n            }\n\n            // On click to open modal\n            $(elem).on('click.Modaal', function (e) {\n                e.preventDefault();\n\n                var source;\n\n                // Save last active state before modal\n                self.lastFocus = document.activeElement;\n\n                // CB: before_open\n                self.options.before_open.call(self, e);\n\n                switch (self.options.type) {\n                    case 'inline':\n                        self.create_basic();\n                        break;\n\n                    case 'ajax':\n                        source = self.options.source(self.$elem, self.$elem.attr('href'));\n                        self.fetch_ajax(source);\n                        break;\n\n                    case 'confirm':\n                        self.options.is_locked = true;\n                        self.create_confirm();\n                        break;\n\n                    case 'image':\n                        self.create_image();\n                        break;\n\n                    case 'iframe':\n                        source = self.options.source(self.$elem, self.$elem.attr('href'));\n                        self.create_iframe(source);\n                        break;\n\n                    case 'video':\n                        self.create_video(self.$elem.attr('href'));\n                        break;\n\n                    case 'instagram':\n                        self.create_instagram();\n                        break;\n                }\n\n                // call events to be watched (click, tab, keyup, keydown etc.)\n                self.watch_events();\n            });\n\n            // Check for start_open\n            if (self.options.start_open === true) {\n                $(elem).click();\n            }\n        },\n\n        // Watching Modal\n        // ----------------------------------------------------------------\n        watch_events: function () {\n            var self = this;\n\n            dom.off('click.Modaal keyup.Modaal keydown.Modaal');\n\n            // Body keydown\n            dom.on('keydown.Modaal', function (e) {\n                var key = e.keyCode;\n                var target = e.target;\n\n                // look for tab change and reset focus to modal window\n                // done in keydown so the check fires repeatedly when you hold the tab key down\n                if (key == 9 && self.scope.is_open) {\n                    if (!$.contains(document.getElementById(self.scope.id), target)) {\n                        $('#' + self.scope.id).find('*[tabindex=\"0\"]').focus();\n                    }\n                }\n            });\n\n            // Body keyup\n            dom.on('keyup.Modaal', function (e) {\n                var key = e.keyCode;\n                var target = e.target;\n\n                if (!self.options.is_locked) {\n                    // On escape key press close modal\n                    if (key == 27 && self.scope.is_open) {\n                        if ($(document.activeElement).is('input')) {\n                            return false;\n                        }\n\n                        self.modaal_close();\n                        return;\n                    }\n                }\n\n                // is gallery open and images length is > 1\n                if (self.options.type == 'image') {\n                    // arrow left for back\n                    if (key == 37 && self.scope.is_open && !$('#' + self.scope.id + ' .modaal-gallery-prev').hasClass('is_hidden')) {\n                        self.gallery_update('prev');\n                    }\n                    // arrow right for next\n                    if (key == 39 && self.scope.is_open && !$('#' + self.scope.id + ' .modaal-gallery-next').hasClass('is_hidden')) {\n                        self.gallery_update('next');\n                    }\n                    return;\n                }\n            });\n\n            // Body click\n            dom.on('click.Modaal', function (e) {\n                var trigger = $(e.target);\n\n                // General Controls: If it's not locked allow greedy close\n                if (!self.options.is_locked) {\n                    if (self.options.overlay_close && trigger.is('.modaal-inner-wrapper') || trigger.is('.modaal-close')) {\n                        self.modaal_close();\n                        return;\n                    }\n                }\n\n                //Confirm Controls\n                if (trigger.is('.modaal-confirm-btn')) {\n                    // if 'OK' button is clicked, run confirm_callback()\n                    if (trigger.is('.modaal-ok')) {\n                        self.options.confirm_callback.call(self, self.lastFocus);\n                    }\n                    self.modaal_close();\n                    return;\n                }\n\n                // Gallery Controls\n                if (trigger.is('.modaal-gallery-control')) {\n                    // it not active, don't do nuthin!\n                    if (trigger.hasClass('is_hidden')) {\n                        return;\n                    }\n\n                    // trigger previous\n                    if (trigger.is('.modaal-gallery-prev')) {\n                        self.gallery_update('prev');\n                    }\n                    // trigger next\n                    if (trigger.is('.modaal-gallery-next')) {\n                        self.gallery_update('next');\n                    }\n                    return;\n                }\n            });\n        },\n\n        // Append markup into DOM\n        build_modal: function (content) {\n            var self = this;\n\n            // if is instagram\n            var igClass = '';\n            if (self.options.type == 'instagram') {\n                igClass = ' modaal-instagram';\n            }\n\n            var wrap_class = self.options.type == 'video' ? 'modaal-video-wrap' : 'modaal-content';\n\n            /*\n             modaal-start_none : fully hidden via display:none;\n             modaal-start_fade : hidden via opacity:0\n             modaal-start_slidedown : ...\n              */\n            var animation_class;\n            switch (self.options.animation) {\n                case 'fade':\n                    animation_class = ' modaal-start_fade';\n                    break;\n                case 'slide-down':\n                    animation_class = ' modaal-start_slidedown';\n                    break;\n                default:\n                    animation_class = ' modaal-start_none';\n            }\n\n            // fullscreen check\n            var fullscreen_class = '';\n            if (self.options.fullscreen) {\n                fullscreen_class = ' modaal-fullscreen';\n            }\n\n            // custom class check\n            if (self.options.custom_class !== '' || typeof self.options.custom_class !== 'undefined') {\n                self.options.custom_class = ' ' + self.options.custom_class;\n            }\n\n            //var build_markup = '<div class=\"modaal-wrapper modaal-start_fade' + igClass + '\" id=\"' + self.scope.id + '\"><div class=\"modaal-outer-wrapper\"><div class=\"modaal-inner-wrapper\">';\n            var build_markup = '<div class=\"modaal-wrapper modaal-' + self.options.type + animation_class + igClass + fullscreen_class + self.options.custom_class + '\" id=\"' + self.scope.id + '\"><div class=\"modaal-outer-wrapper\"><div class=\"modaal-inner-wrapper\">';\n\n            // hide if video\n            if (self.options.type != 'video') {\n                build_markup += '<div class=\"modaal-container\">';\n            }\n\n            // add the guts of the content\n            build_markup += '<div class=\"' + wrap_class + '\" aria-hidden=\"false\" aria-label=\"' + self.options.accessible_title + ' (Press escape to close)\" role=\"dialog\">';\n\n            // If it's inline type, we want to clone content instead of dropping it straight in\n            if (self.options.type == 'inline') {\n                build_markup += '<div class=\"modaal-content-container\"></div>';\n            } else {\n                // Drop in the content if it's not inline\n                build_markup += content;\n            }\n\n            // close wrap_class\n            build_markup += '</div>' + self.scope.close_btn;\n\n            // hide if video\n            if (self.options.type != 'video') {\n                build_markup += '</div>';\n            }\n\n            // close off modaal-wrapper\n            build_markup += '</div></div></div>';\n\n            // append ajax modal markup to dom\n            dom.append(build_markup);\n\n            // if inline, clone content into space\n            if (self.options.type == 'inline') {\n                content.appendTo('#' + self.scope.id + ' .modaal-content-container');\n            }\n\n            // Trigger overlay show (which triggers modal show)\n            self.modaal_overlay('show');\n        },\n\n        // Create Basic Inline Modal\n        // ----------------------------------------------------------------\n        create_basic: function () {\n            var self = this;\n            // if $elem is a link, then href points to the target, otherwise assume target was passed in initially\n            var target = self.$elem.is('[href]') ? $(self.$elem.attr('href')) : self.$elem;\n            var content = '';\n\n            if (target.length) {\n                content = target.children().clone(true, true);\n                target.empty();\n            } else {\n                content = 'Content could not be loaded. Please check the source and try again.';\n            }\n\n            // now push content into markup\n            self.build_modal(content);\n        },\n\n        // Create Instagram Modal\n        // ----------------------------------------------------------------\n        create_instagram: function () {\n            var self = this;\n            var id = self.options.instagram_id;\n            var content = '';\n\n            var error_msg = 'Instagram photo couldn\\'t be loaded, please check the embed code and try again.';\n\n            self.build_modal('<div class=\"modaal-content-container' + (self.options.loading_class != '' ? ' ' + self.options.loading_class : '') + '\">' + self.options.loading_content + '</div>');\n\n            // ID exists, is not empty null or undefined.\n            if (id != '' && id !== null && id !== undefined) {\n                // set up oembed url\n                var ig_url = 'https://api.instagram.com/oembed?url=http://instagr.am/p/' + id + '/';\n\n                $.ajax({\n                    url: ig_url,\n                    dataType: \"jsonp\",\n                    cache: false,\n                    success: function (data) {\n                        // set up the new content\n                        content = data.html;\n\n                        // now set location for new content\n                        var target = $('#' + self.scope.id + ' .modaal-content-container');\n                        if (target.length > 0) {\n                            // add HTML into target region\n                            target.removeClass(self.options.loading_class);\n                            target.html(content);\n\n                            // now trigger an instagram refresh\n                            window.instgrm.Embeds.process();\n                        }\n                    },\n                    error: function () {\n                        content = error_msg;\n\n                        // now set location for new content\n                        var target = $('#' + self.scope.id + ' .modaal-content-container');\n                        if (target.length > 0) {\n                            target.removeClass(self.options.loading_class).addClass(self.options.ajax_error_class);\n                            target.html(content);\n                        }\n                    }\n                });\n            } else {\n                content = error_msg;\n            }\n\n            return false;\n        },\n\n        // Fetch Ajax Data\n        // ----------------------------------------------------------------\n        fetch_ajax: function (url) {\n            var self = this;\n            var content = '';\n\n            // If no accessible title, set it to 'Dialog Window'\n            if (self.options.accessible_title == null) {\n                self.options.accessible_title = 'Dialog Window';\n            }\n\n            if (self.xhr !== null) {\n                self.xhr.abort();\n                self.xhr = null;\n            }\n\n            self.build_modal('<div class=\"modaal-content-container' + (self.options.loading_class != '' ? ' ' + self.options.loading_class : '') + '\">' + self.options.loading_content + '</div>');\n\n            self.xhr = $.ajax(url, {\n                success: function (data) {\n                    // content fetch is successful so push it into markup\n                    var target = $('#' + self.scope.id).find('.modaal-content-container');\n                    if (target.length > 0) {\n                        target.removeClass(self.options.loading_class);\n                        target.html(data);\n\n                        self.options.ajax_success.call(self, target);\n                    }\n                },\n                error: function (xhr) {\n                    // There were some errors so return an error message\n                    if (xhr.statusText == 'abort') {\n                        return;\n                    }\n\n                    var target = $('#' + self.scope.id + ' .modaal-content-container');\n                    if (target.length > 0) {\n                        target.removeClass(self.options.loading_class).addClass(self.options.ajax_error_class);\n                        target.html('Content could not be loaded. Please check the source and try again.');\n                    }\n                }\n            });\n        },\n\n        // Create Confirm Modal\n        // ----------------------------------------------------------------\n        create_confirm: function () {\n            var self = this;\n            var content;\n\n            content = '<div class=\"modaal-content-container\">' + '<h1 id=\"modaal-title\">' + self.options.confirm_title + '</h1>' + '<div class=\"modaal-confirm-content\">' + self.options.confirm_content + '</div>' + '<div class=\"modaal-confirm-wrap\">' + '<button type=\"button\" class=\"modaal-confirm-btn modaal-ok\" aria-label=\"Confirm\">' + self.options.confirm_button_text + '</button>' + '<button type=\"button\" class=\"modaal-confirm-btn modaal-cancel\" aria-label=\"Cancel\">' + self.options.confirm_cancel_button_text + '</button>' + '</div>' + '</div>' + '</div>';\n\n            // now push content into markup\n            self.build_modal(content);\n        },\n\n        // Create Image/Gallery Modal\n        // ----------------------------------------------------------------\n        create_image: function () {\n            var self = this;\n            var content;\n\n            var modaal_image_markup = '';\n            var gallery_total;\n            var prev_btn = '<button type=\"button\" class=\"modaal-gallery-control modaal-gallery-prev\" id=\"modaal-gallery-prev\" aria-label=\"Previous image (use left arrow to change)\"><span>Previous Image</span></button>';\n            var next_btn = '<button type=\"button\" class=\"modaal-gallery-control modaal-gallery-next\" id=\"modaal-gallery-next\" aria-label=\"Next image (use right arrow to change)\"><span>Next Image</span></button>';\n\n            // If has rel attribute\n            if (self.$elem.is('[rel]')) {\n                // find gallery rel\n                var gallery_group = self.$elem.attr('rel');\n                var gallery_group_items = $('[rel=\"' + gallery_group + '\"]');\n\n                // remove any previous active attribute to any in the group\n                gallery_group_items.removeAttr('data-gallery-active', 'is_active');\n                // add active attribute to the item clicked\n                self.$elem.attr('data-gallery-active', 'is_active');\n\n                // how many in the rel grouping are there (-1 to connect with each function starting with 0)\n                gallery_total = gallery_group_items.length - 1;\n\n                // prepare array for gallery data\n                var gallery = [];\n\n                // start preparing markup\n                modaal_image_markup = '<div class=\"modaal-gallery-item-wrap\">';\n\n                // loop each grouping item and push it into our gallery array\n                gallery_group_items.each(function (i, item) {\n                    // setup default content\n                    var img_src = '';\n                    var img_alt = '';\n                    var img_description = '';\n                    var img_active = false;\n\n                    var data_modaal_desc = item.getAttribute('data-modaal-desc');\n                    var data_item_active = item.getAttribute('data-gallery-active');\n\n                    // is it an img SRC or link HREF value\n                    if (item.href !== '' || item.href !== undefined) {\n                        img_src = item.href;\n                    } else if (item.src !== '' || item.src !== undefined) {\n                        img_src = item.src;\n                    }\n\n                    // Does it have a modaal description\n                    if (data_modaal_desc != '' && data_modaal_desc !== null && data_modaal_desc !== undefined) {\n                        img_alt = data_modaal_desc;\n                        img_description = '<div class=\"modaal-gallery-label\"><span class=\"modaal-accessible-hide\">Image ' + (i + 1) + ' - </span>' + data_modaal_desc + '</div>';\n                    } else {\n                        img_description = '<div class=\"modaal-gallery-label\"><span class=\"modaal-accessible-hide\">Image ' + (i + 1) + '</span></div>';\n                    }\n\n                    // is it the active item\n                    if (data_item_active) {\n                        img_active = true;\n                    }\n\n                    // set new object for values we want\n                    var gallery_item = {\n                        'url': img_src,\n                        'alt': img_alt,\n                        'desc': img_description,\n                        'active': img_active\n                    };\n\n                    // push object into gallery array\n                    gallery.push(gallery_item);\n                });\n\n                // now loop through all items in the gallery and build up the markup\n                for (var i = 0; i < gallery.length; i++) {\n                    // Set default active class, then check if array item active is true and update string for class\n                    var is_active = '';\n\n                    if (gallery[i].active) {\n                        is_active = ' ' + self.private_options.active_class;\n                    }\n\n                    // for each item build up the markup\n                    modaal_image_markup += '<div class=\"modaal-gallery-item gallery-item-' + i + is_active + '\">' + '<img src=\"' + gallery[i].url + '\" alt=\" \">' + gallery[i].desc + '</div>';\n                }\n\n                // close off the markup for the gallery and add next/previous buttons\n                modaal_image_markup += '</div>' + prev_btn + next_btn;\n            } else {\n                // This is only a single gallery item so let's grab the necessary values\n\n                // Setup selected image\n                var this_img_src = self.$elem.attr('href');\n                var this_img_alt_txt = '';\n                var this_img_alt = '';\n\n                if (self.$elem.attr('data-modaal-desc')) {\n                    this_img_alt_txt = self.$elem.attr('data-modaal-desc');\n                    this_img_alt = '<div class=\"modaal-gallery-label\"><span class=\"modaal-accessible-hide\">Image - </span>' + this_img_alt_txt + '</div>';\n                }\n\n                // build up the html\n                modaal_image_markup = '<div class=\"modaal-gallery-item is_active\">' + '<img src=\"' + this_img_src + '\" alt=\"' + this_img_alt_txt + '\">' + this_img_alt + '</div>';\n            }\n\n            // Update content variable\n            content = modaal_image_markup;\n\n            // now push content into markup\n            self.build_modal(content);\n\n            // setup next & prev buttons\n            if ($('.modaal-gallery-item.is_active').is('.gallery-item-0')) {\n                $('.modaal-gallery-prev').hide();\n            }\n            if ($('.modaal-gallery-item.is_active').is('.gallery-item-' + gallery_total)) {\n                $('.modaal-gallery-next').hide();\n            }\n        },\n\n        // Gallery Change Image\n        // ----------------------------------------------------------------\n        gallery_update: function (direction) {\n            var self = this;\n            var this_gallery = $('#' + self.scope.id);\n            var this_gallery_item = this_gallery.find('.modaal-gallery-item');\n            var this_gallery_total = this_gallery_item.length - 1;\n\n            // if single item, don't proceed\n            if (this_gallery_total == 0) {\n                return false;\n            }\n\n            var prev_btn = this_gallery.find('.modaal-gallery-prev'),\n                next_btn = this_gallery.find('.modaal-gallery-next');\n\n            var duration = 250;\n\n            var new_img_w = 0,\n                new_img_h = 0;\n\n            // CB: Before image change\n            var current_item = this_gallery.find('.modaal-gallery-item.' + self.private_options.active_class),\n                incoming_item = direction == 'next' ? current_item.next('.modaal-gallery-item') : current_item.prev('.modaal-gallery-item');\n            self.options.before_image_change.call(self, current_item, incoming_item);\n\n            // stop change if at start of end\n            if (direction == 'prev' && this_gallery.find('.gallery-item-0').hasClass('is_active')) {\n                return false;\n            } else if (direction == 'next' && this_gallery.find('.gallery-item-' + this_gallery_total).hasClass('is_active')) {\n                return false;\n            }\n\n            // lock dimensions\n            current_item.stop().animate({\n                opacity: 0\n            }, duration, function () {\n                // Move to appropriate image\n                incoming_item.addClass('is_next').css({\n                    'position': 'absolute',\n                    'display': 'block',\n                    'opacity': 0\n                });\n\n                // start toggle to 'is_next'\n                new_img_w = this_gallery.find('.modaal-gallery-item.is_next').width();\n                new_img_h = this_gallery.find('.modaal-gallery-item.is_next').height();\n\n                // resize gallery region\n                this_gallery.find('.modaal-gallery-item-wrap').stop().animate({\n                    'width': new_img_w,\n                    'height': new_img_h\n                }, duration, function () {\n                    // hide old active image\n                    current_item.removeClass(self.private_options.active_class + ' ' + self.options.gallery_active_class).removeAttr('style');\n\n                    // show new image\n                    incoming_item.addClass(self.private_options.active_class + ' ' + self.options.gallery_active_class).removeClass('is_next').css('position', '');\n\n                    // animate in new image (now has the normal is_active class\n                    incoming_item.stop().animate({\n                        opacity: 1\n                    }, duration, function () {\n                        $(this).removeAttr('style');\n\n                        // remove dimension lock\n                        this_gallery.find('.modaal-gallery-item-wrap').removeAttr('style');\n\n                        // CB: After image change\n                        self.options.after_image_change.call(self, incoming_item);\n                    });\n\n                    // Focus on the new gallery item\n                    this_gallery.find('.modaal-gallery-item .modaal-gallery-label').removeAttr('tabindex');\n                    this_gallery.find('.modaal-gallery-item.' + self.private_options.active_class + ' .modaal-gallery-label').attr('tabindex', '0').focus();\n\n                    // hide/show next/prev\n                    if (this_gallery.find('.modaal-gallery-item.' + self.private_options.active_class).is('.gallery-item-0')) {\n                        prev_btn.stop().animate({\n                            opacity: 0\n                        }, 150, function () {\n                            $(this).hide();\n                        });\n                    } else {\n                        prev_btn.stop().css({\n                            'display': 'block',\n                            'opacity': prev_btn.css('opacity')\n                        }).animate({\n                            opacity: 1\n                        }, 150);\n                    }\n                    if (this_gallery.find('.modaal-gallery-item.' + self.private_options.active_class).is('.gallery-item-' + this_gallery_total)) {\n                        next_btn.stop().animate({\n                            opacity: 0\n                        }, 150, function () {\n                            $(this).hide();\n                        });\n                    } else {\n                        next_btn.stop().css({\n                            'display': 'block',\n                            'opacity': prev_btn.css('opacity')\n                        }).animate({\n                            opacity: 1\n                        }, 150);\n                    }\n                });\n            });\n        },\n\n        // Create Video Modal\n        // ----------------------------------------------------------------\n        create_video: function (url) {\n            var self = this;\n            var content;\n\n            // video markup\n            content = '<iframe src=\"' + url + '\" class=\"modaal-video-frame\" frameborder=\"0\" allowfullscreen></iframe>';\n\n            // now push content into markup\n            self.build_modal('<div class=\"modaal-video-container\">' + content + '</div>');\n        },\n\n        // Create iFrame Modal\n        // ----------------------------------------------------------------\n        create_iframe: function (url) {\n            var self = this;\n            var content;\n\n            if (self.options.width !== null || self.options.width !== undefined || self.options.height !== null || self.options.height !== undefined) {\n                // video markup\n                content = '<div class=\"modaal-content\" aria-hidden=\"false\" aria-labelledby=\"' + self.options.accessible_title + '\" role=\"dialog\">' + '<iframe src=\"' + url + '\" class=\"modaal-iframe-elem\" style=\"width: ' + self.options.width + 'px;height: ' + self.options.height + 'px\" frameborder=\"0\" allowfullscreen></iframe>' + '</div>';\n            } else {\n                content = '<div class=\"modaal-content-container\">Please specify a width and height for your iframe</div>';\n            }\n\n            // now push content into markup\n            self.build_modal(content);\n        },\n\n        // Open Modaal\n        // ----------------------------------------------------------------\n        modaal_open: function () {\n            var self = this;\n            var modal_wrapper = $('#' + self.scope.id);\n            var animation_type = self.options.animation;\n\n            if (animation_type === 'none') {\n                modal_wrapper.removeClass('modaal-start_none');\n                self.options.after_open.call(self, modal_wrapper);\n            }\n\n            // Open with fade\n            if (animation_type === 'fade') {\n                modal_wrapper.removeClass('modaal-start_fade');\n            }\n\n            // Open with slide down\n            if (animation_type === 'slide-down') {\n                modal_wrapper.removeClass('modaal-start_slide_down');\n            }\n\n            // set default focusTarget (used for tabindex)\n            var focusTarget = modal_wrapper;\n\n            // Switch focusTarget tabindex (switch from other modal if exists)\n            $('.modaal-wrapper *[tabindex=0]').removeAttr('tabindex');\n\n            if (self.options.type == 'image') {\n                focusTarget = $('#' + self.scope.id).find('.modaal-gallery-item.' + self.private_options.active_class);\n            } else if (modal_wrapper.find('.modaal-iframe-elem').length) {\n                focusTarget = modal_wrapper.find('.modaal-iframe-elem');\n            } else if (modal_wrapper.find('.modaal-video-wrap').length) {\n                focusTarget = modal_wrapper.find('.modaal-video-wrap');\n            } else if (modal_wrapper.find('.modaal-content-container').length) {\n                focusTarget = modal_wrapper.find('.modaal-content-container');\n            } else if (modal_wrapper.find('.modaal-content').length) {\n                focusTarget = modal_wrapper.find('.modaal-content');\n            }\n\n            // now set the focus\n            focusTarget.attr('tabindex', '0').focus();\n\n            // Run after_open\n            if (animation_type !== 'none') {\n                // CB: after_open\n                setTimeout(function () {\n                    self.options.after_open.call(self, modal_wrapper);\n                }, self.options.after_callback_delay);\n            }\n        },\n\n        // Close Modal\n        // ----------------------------------------------------------------\n        modaal_close: function () {\n            var self = this;\n            var modal_wrapper = $('#' + self.scope.id);\n\n            // CB: before_close\n            self.options.before_close.call(self, modal_wrapper);\n\n            if (self.xhr !== null) {\n                self.xhr.abort();\n                self.xhr = null;\n            }\n\n            // Now we close the modal\n            if (self.options.animation === 'none') {\n                modal_wrapper.addClass('modaal-start_none');\n            }\n\n            // Close with fade\n            if (self.options.animation === 'fade') {\n                modal_wrapper.addClass('modaal-start_fade');\n            }\n\n            // Close with slide up (using initial slide down)\n            if (self.options.animation === 'slide-down') {\n                modal_wrapper.addClass('modaal-start_slide_down');\n            }\n\n            // CB: after_close and remove\n            setTimeout(function () {\n                // clone inline content back to origin place\n                if (self.options.type == 'inline') {\n                    $('#' + self.scope.id + ' .modaal-content-container').children().clone(true, true).appendTo(self.$elem.attr('href'));\n                }\n                // remove markup from dom\n                modal_wrapper.remove();\n                // CB: after_close\n                self.options.after_close.call(self);\n                // scope is now closed\n                self.scope.is_open = false;\n            }, self.options.after_callback_delay);\n\n            // Call overlay hide\n            self.modaal_overlay('hide');\n\n            // Roll back to last focus state before modal open. If was closed programmatically, this might not be set\n            if (self.lastFocus != null) {\n                self.lastFocus.focus();\n            }\n        },\n\n        // Overlay control (accepts action for show or hide)\n        // ----------------------------------------------------------------\n        modaal_overlay: function (action) {\n            var self = this;\n\n            if (action == 'show') {\n                // Modal is open so update scope\n                self.scope.is_open = true;\n\n                // set body to overflow hidden if background_scroll is false\n                if (!self.options.background_scroll) {\n                    dom.css({\n                        'overflow': 'hidden'\n                    });\n                }\n\n                // append modaal overlay\n                dom.append('<div class=\"modaal-overlay\" id=\"' + self.scope.id + '_overlay\"></div>');\n\n                // now show\n                $('#' + self.scope.id + '_overlay').css('background', self.options.background).stop().animate({\n                    opacity: self.options.overlay_opacity\n                }, self.options.animation_speed, function () {\n                    // now open the modal\n                    self.modaal_open();\n                });\n            } else if (action == 'hide') {\n                // remove body overflow lock\n                dom.css('overflow', '');\n\n                // now hide the overlay\n                $('#' + self.scope.id + '_overlay').stop().animate({\n                    opacity: 0\n                }, self.options.animation_speed, function () {\n                    // remove overlay from dom\n                    $(this).remove();\n                });\n            }\n        }\n    };\n\n    // on page load check if single '.modaal' exists\n    $(function () {\n        var single_modaal = $('.modaal');\n\n        if (single_modaal.length) {\n            single_modaal.each(function () {\n                var self = $(this);\n\n                // new empty options\n                var options = {};\n                var inline_options = false;\n\n                // option: type\n                if (self.attr('data-modaal-type')) {\n                    inline_options = true;\n                    options.type = self.attr('data-modaal-type');\n                }\n\n                // option: animation\n                if (self.attr('data-modaal-animation')) {\n                    inline_options = true;\n                    options.animation = self.attr('data-modaal-animation');\n                }\n\n                // option: animation_speed\n                if (self.attr('data-modaal-animation-speed')) {\n                    inline_options = true;\n                    options.animation_speed = self.attr('data-modaal-animation-speed');\n                }\n\n                // option: after_callback_delay\n                if (self.attr('data-modaal-after-callback-delay')) {\n                    inline_options = true;\n                    options.after_callback_delay = self.attr('data-modaal-after-callback-delay');\n                }\n\n                // option: after_callback_delay\n                if (self.attr('data-modaal-locked')) {\n                    inline_options = true;\n                    options.is_locked = self.attr('data-modaal-locked') === 'true' ? true : false;\n                }\n\n                // option: hide_close\n                if (self.attr('data-modaal-hide-close')) {\n                    inline_options = true;\n                    options.hide_close = self.attr('data-modaal-hide-close') === 'true' ? true : false;\n                }\n\n                // option: background\n                if (self.attr('data-modaal-background')) {\n                    inline_options = true;\n                    options.background = self.attr('data-modaal-background');\n                }\n\n                // option: overlay_opacity\n                if (self.attr('data-modaal-overlay-opacity')) {\n                    inline_options = true;\n                    options.overlay_opacity = self.attr('data-modaal-overlay-opacity');\n                }\n\n                // option: overlay_close\n                if (self.attr('data-modaal-overlay-close')) {\n                    inline_options = true;\n                    options.overlay_close = self.attr('data-modaal-overlay-close') === 'false' ? false : true;\n                }\n\n                // option: accessible_title\n                if (self.attr('data-modaal-accessible-title')) {\n                    inline_options = true;\n                    options.accessible_title = self.attr('data-modaal-accessible-title');\n                }\n\n                // option: start_open\n                if (self.attr('data-modaal-start-open')) {\n                    inline_options = true;\n                    options.start_open = self.attr('data-modaal-start-open') === 'true' ? true : false;\n                }\n\n                // option: fullscreen\n                if (self.attr('data-modaal-fullscreen')) {\n                    inline_options = true;\n                    options.fullscreen = self.attr('data-modaal-fullscreen') === 'true' ? true : false;\n                }\n\n                // option: custom_class\n                if (self.attr('data-modaal-custom-class')) {\n                    inline_options = true;\n                    options.custom_class = self.attr('data-modaal-custom-class');\n                }\n\n                // option: background_scroll\n                if (self.attr('data-modaal-background-scroll')) {\n                    inline_options = true;\n                    options.background_scroll = self.attr('data-modaal-background-scroll') === 'true' ? true : false;\n                }\n\n                // option: width\n                if (self.attr('data-modaal-width')) {\n                    inline_options = true;\n                    options.width = parseInt(self.attr('data-modaal-width'));\n                }\n\n                // option: height\n                if (self.attr('data-modaal-height')) {\n                    inline_options = true;\n                    options.height = parseInt(self.attr('data-modaal-height'));\n                }\n\n                // option: confirm_button_text\n                if (self.attr('data-modaal-confirm-button-text')) {\n                    inline_options = true;\n                    options.confirm_button_text = self.attr('data-modaal-confirm-button-text');\n                }\n\n                // option: confirm_cancel_button_text\n                if (self.attr('data-modaal-confirm-cancel-button-text')) {\n                    inline_options = true;\n                    options.confirm_cancel_button_text = self.attr('data-modaal-confirm-cancel-button-text');\n                }\n\n                // option: confirm_title\n                if (self.attr('data-modaal-confirm-title')) {\n                    inline_options = true;\n                    options.confirm_title = self.attr('data-modaal-confirm-title');\n                }\n\n                // option: confirm_content\n                if (self.attr('data-modaal-confirm-content')) {\n                    inline_options = true;\n                    options.confirm_content = self.attr('data-modaal-confirm-content');\n                }\n\n                // option: gallery_active_class\n                if (self.attr('data-modaal-gallery-active-class')) {\n                    inline_options = true;\n                    options.gallery_active_class = self.attr('data-modaal-gallery-active-class');\n                }\n\n                // option: loading_content\n                if (self.attr('data-modaal-loading-content')) {\n                    inline_options = true;\n                    options.loading_content = self.attr('data-modaal-loading-content');\n                }\n\n                // option: loading_class\n                if (self.attr('data-modaal-loading-class')) {\n                    inline_options = true;\n                    options.loading_class = self.attr('data-modaal-loading-class');\n                }\n\n                // option: ajax_error_class\n                if (self.attr('data-modaal-ajax-error-class')) {\n                    inline_options = true;\n                    options.ajax_error_class = self.attr('data-modaal-ajax-error-class');\n                }\n\n                // option: start_open\n                if (self.attr('data-modaal-instagram-id')) {\n                    inline_options = true;\n                    options.instagram_id = self.attr('data-modaal-instagram-id');\n                }\n\n                // now set it up for the trigger, but only if inline_options is true\n                if (inline_options) {\n                    self.modaal(options);\n                }\n            });\n        }\n    });\n\n    $.fn.modaal = function (options) {\n        return this.each(function () {\n            var existing_modaal = $(this).data('modaal');\n\n            if (existing_modaal) {\n                // Checking for string value, used for methods\n                if (typeof options == 'string') {\n                    switch (options) {\n                        case 'close':\n                            existing_modaal.modaal_close();\n                            break;\n                    }\n                }\n            } else {\n                // Not a string, so let's setup the modal ready to use\n                var modaal = Object.create(Modaal);\n                modaal.init(options, this);\n                $.data(this, \"modaal\", modaal);\n            }\n        });\n    };\n\n    // Defaults\n    // ------------------------------------------------------------\n    $.fn.modaal.options = {\n\n        //General\n        type: 'inline',\n        animation: 'fade',\n        animation_speed: 300,\n        after_callback_delay: 350,\n        is_locked: false,\n        hide_close: false,\n        background: '#000',\n        overlay_opacity: '0.8',\n        overlay_close: true,\n        accessible_title: 'Dialog Window',\n        start_open: false,\n        fullscreen: false,\n        custom_class: '',\n        background_scroll: false, // TODO: this property isn't described in the header\n\n        width: null,\n        height: null,\n\n        //Events\n        before_open: function () {},\n        after_open: function () {},\n        before_close: function () {},\n        after_close: function () {},\n        source: function (element, src) {\n            return src;\n        },\n\n        //Confirm Modal\n        confirm_button_text: 'Confirm', // text on confirm button\n        confirm_cancel_button_text: 'Cancel',\n        confirm_title: 'Confirm Title', // title for confirm modal\n        confirm_content: '<p>This is the default confirm dialog content. Replace me through the options</p>', // html for confirm message\n        confirm_callback: function () {},\n\n        //Gallery Modal\n        gallery_active_class: 'gallery_active_item',\n        before_image_change: function (current_item, incoming_item) {},\n        after_image_change: function (current_item) {},\n\n        //Ajax Modal\n        loading_content: modaal_loading_spinner,\n        loading_class: 'is_loading',\n        ajax_error_class: 'modaal-error',\n        ajax_success: function () {},\n\n        //Instagram\n        instagram_id: null\n\n    };\n})(jQuery, window, document);"],"sourceRoot":"/source/"}